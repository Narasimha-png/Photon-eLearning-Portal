<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Forgot-Password</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
        <style>
            #mail{
               padding: 1rem;
            }
            #resetdiv{
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate( -50% , -50%);
                display: flex;
                flex-direction: column;
                gap: 1rem;
               

            }
            #spinner{
                display: block;
                margin: auto;
                display: none;
            }
            #resetbutton , #name{
                width: 40vw;
            }
            #nav{
                background-color: #e3f2fd;
                padding: 1rem;
            }
           
        </style>
</head>

<body>
   <div id="nav"><h3>Reset Password</h3></div>
   
    <div id="resetdiv">
    <div class="form-floating mb-3">
        <input id="name" name="email" type="email" class="form-control" id="floatingInput" placeholder="name@example.com">
        <label for="floatingInput">Email address</label>
    </div>
    <div>
    <button id="resetbutton" onclick="resetpassword()" class="w-100 btn btn-lg btn-primary" type="submit">Reset Password</button>
</div>
<div id="spinner" class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
<div id="mail"></div>
</div>
    

    <script>
        function resetpassword() {
            const spinner = document.getElementById("spinner");
            const btn = document.getElementById("resetbutton");
            btn.style.display = "none";
            spinner.style.display = "block";
            const email = document.getElementById("name").value;
            const data = {
                newmail: email
            }
            method: fetch('/resetpassoword', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data),
            }).then( response => response.text()).then(data =>{
                if( data.indexOf("success") != -1 ){
                    spinner.style.display = "none";
                    document.getElementById("mail").innerHTML = `<p style = "color: green " > ${data} `;
                }
                else{
                    spinner.style.display = "none";
                    btn.style.display = "block" ;
                document.getElementById("mail").innerHTML = `<p style = "color: red " > ${data} `;
                }
            });
            
        }

    </script>


    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>
    <script>

    </script>
</body>

</html>